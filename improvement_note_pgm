Improvement Note of Qiime Pipeline
Fenglei Jiang
9/19/2013

Pipeline Name: qiime_pipeline_jiang_bamfq.py
Directory: /mnt/grl/brc/application/qiime_pipeline_jiang/pipeline_pgm/

This pipeline was modified from the original qiime_pipeline.py located in /mnt/grl/brc/application/qiime_pipeline/. A few problems in the original pipeline have been fixed.

The changes are described below:

1. The "print_help()" function was changed to "self.print_help()". Also the line of "if self.input is None or self.output is None or self.map is None or self.quality is None or self.length is None:" was changed to "if self.help is False and (self.input is None or self.output is None or self.map is None or self.quality is None or self.length is None):". These changes make -h --help option work properly.

2. The help message was changed accordingly. Typos were corrected

3. The "script_path" was changed accordingly.

4. In the run_qiime.py under the same directory, a few lines were added to get the even sampling parameter "-e" for computing beta diversity:

import math
    for item in open (self.out + "/otus/library_stats.txt"):
      if "Min" in item:
        self.min_depth =str(int(float(item.strip()[5:])))
    print self.min_depth
    os.system("beta_diversity_through_plots.py -f -i " + self.out + "/otus/otu_table.biom -m " + self.map + " -o " + self.out + "/bdiv -t " + self.out + "/otus/rep_set.tre -e " + self.min_depth)

For complete information about the qiime pipeline, please refer to the manual located at /mnt/grl/brc/application/qiime_pipeline/documentation and /mnt/grl/brc/application/qiime_pipeline/examples.
